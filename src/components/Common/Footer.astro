---
import { WebsiteConfig } from "../../config";
import LinkButton from "./LinkButton.astro";

const shareLinks = [
  ["Facebook", "facebook"],
  ["Telegram", "telegram"],
  ["Twitter", "twitter"],
];

const pagesLinks = [
            [WebsiteConfig.FACEBOOK_PAGE, "facebook"],
            [WebsiteConfig.INSTAGRAM_PAGE, "instagram"],
            [WebsiteConfig.MEETUP_PAGE, "web"],
            [WebsiteConfig.LINKEDIN_PAGE, "linkedin"],
            [WebsiteConfig.WEBSITE, "web"],
          ];

const year = new Date().getFullYear();

function shareWebsite(social: string) {
    const websiteUrl = encodeURIComponent(WebsiteConfig.DEVFEST_WEBSITE_LINK);;
    const fullTweet = WebsiteConfig.TWITTER_SOCIAL_TEXT.replace(
        "{url}",
        websiteUrl
    );

    switch (social) {
        case "Facebook":
            return `https://www.facebook.com/sharer/sharer.php?u=${websiteUrl}`
        case "Twitter":
            return `https://x.com/intent/tweet?text=${fullTweet}`
        case "Telegram":
            return `https://t.me/share/url?url=${websiteUrl}&text=${WebsiteConfig.TELEGRAM_MESSAGE_TEXT}`
    }
    return "";
}

---

<div class="p-4 bg-base-100 text-white">
  <div class="border mb-4 border-white"></div>

  <div class="flex flex-col gap-4">
    <div class="flex flex-col md:flex-row justify-between">
      <div class="flex flex-col items-start gap-1">
        <p class="text-xl font-medium mb-1 underline">Share</p>
        {
          shareLinks.map(([type, _]) => {
            return (
              <LinkButton
                text={type}
                href={shareWebsite(type)}
              />
            );
          })
        }
      </div>
      <div class="flex flex-col gap-1 items-start md:pt-0 pt-4">
        <span class="text-lg font-medium mb-1 underline">Follow Us</span>
        {
          pagesLinks.map(([url, type]) => {
            return url.length > 0 && <LinkButton href={url} text={type} />;
          })
        }
      </div>
      <div class="flex flex-col gap-1 items-start md:pt-0 pt-4">
        <span class="text-lg font-medium mb-1 underline">Policies</span>
        <LinkButton href="https://www.iubenda.com/privacy-policy/86405163" text="Privacy Policy" />
        <LinkButton href="https://www.iubenda.com/privacy-policy/86405163/cookie-policy" text="Cookie Policy" />
      </div>
    </div>
    
    <div class="border border-white" />

    <div class="flex justify-between">
      <span>GDG Bari - <a href="/login">Login</a></span>
      <span>Copyright {year}</span>
    </div>
  </div>
</div>
